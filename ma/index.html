<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  <meta name="theme-color" content="#2196f3">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <title>MeuAcadêmico</title>
  <link rel="stylesheet" href="https://12h01.github.io/ma/css/framework7.bundle.min.css">
  <link rel="stylesheet" href="https://12h01.github.io/ma/css/app.css">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="MeuAcadêmico">
  <link rel="apple-touch-icon" href="https://12h01.github.io/ma/icons/icon-192x192.png">
  <meta name="description" content="Gerencie seu desempenho acadêmico de forma simples e rápida com o MeuAcadêmico">
</head>
<body style="opacity:0;">
  <div id="app">
    <div class="statusbar"></div>
    <div class="panel panel-left panel-cover theme-dark">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">Sobre o MeuAcadêmico</div>
            </div>
          </div>
          <div class="page-content">
            <div class="block-strong" style="padding:12px;">O MeuAcadêmico é um projeto pessoal. Caso você queira contribuir com o desenvolvimento, sugerir alguma função ou informar algum bug, pode entrar em contato comigo.</div>
            <div class="block links-list"><a class="links-list" onclick="agradecer();">Agradecimentos</a><a class="links-list" onclick="contato();">Entre em contato comigo</a></div>
            <div class="block">Software MeuAcadêmico<br>Versão 1.0.9 (build 190831-1)</div>
            <div class="block">&copy; 2019 João Pedro (@12h01).<br>Todos os direitos reservados.</div>            
          </div>
        </div>
      </div>
    </div>

    <div class="views tabs safe-areas">
      <div id="view-home" class="view view-main tab tab-active">
        <div class="page" data-name="home">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="left">
                <a href="#" class="link icon-only panel-open" data-panel="left">
                  <span style="display:inline-block;"><div class="mnicon"></div><div class="mnicon"></div><div class="mnicon"></div></span>
                </a>
              </div>
              <div class="title sliding">MeuAcadêmico</div>
              <div class="right">
                <p style="font-size:0.6em;padding-right:8px;">v1.0.9<br>por João Pedro</p>
              </div>
            </div>
          </div>

          <div style="margin-top:-8px;" class="page-content">
            <div class="block">
                <p style="margin-top:-8px;"><b>Tenha o controle de suas notas!</b></p>
                <p>Com o MeuAcadêmico, você pode controlar manualmente as notas de suas disciplinas. Chega de esperar pela boa vontade do professor!</p>
                <p>Note que todos os dados de suas notas são armazenados localmente no seu celular. <b>Nenhum</b> dado pessoal ou que possa lhe identificar é enviado para qualquer outro servidor online.</p>
            </div>
            <div class="block">
                <p>Através da ferramenta <b>Disciplinas</b>, você pode armazenar e gerenciar todas as disciplinas, armazenar notas de provas, e calcular a nota de sua N1 e N2 para cada disciplina em curso.</p>
                <p>Já a opção <b>Calcular notas</b> permite que você calcule rapidamente qual a nota mínima necessária para você passar em uma  disciplina sem realizar a prova final (ou seja, passar no mínimo com média 7). Caso você precise fazer a AVF, ele também diz quanto você precisa tirar na AVF para poder passar.</p>
            </div>

            <div style="margin-top:-8px;" class="block block-strong">
              <div class="row">
                <div class="col-50">
                  <a href="#" class="button button-raised button-fill login-screen-open" onclick="rotinaDisciplinas();" data-login-screen="#my-login-screen">Disciplinas</a>
                </div>
                <div class="col-50">
                  <a href="#" class="button button-raised button-fill popup-open" data-popup="#my-popup">Calcular notas</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Popup -->
    <div class="popup" id="my-popup">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title">Calcular notas</div>
              <div class="right">
                <a href="#" class="link popup-close">×</a>
              </div>
            </div>
          </div>
          <div class="page-content">
            <div class="block">
              <p style="text-align:center;">Calcule suas notas de uma forma prática e rápida!</p>
            </div>
            <div class="row block-strong">
              <div class="col-50">
                <div style="text-align:center;"><input style="text-align:center;border:1px solid grey;width:100%;font-size:2em;" type="tel" name="liven1" id="liven1" oninput="this.value = this.value.replace(/,/g, '.');if(parseFloat(this.value) > 10) this.value = 10;if(this.value != '') livenota(1);" placeholder="Nota N1">
                </div>
              </div>
              <div class="col-50">
                <div style="text-align:center;"><input style="text-align:center;border:1px solid grey;width:100%;font-size:2em;" type="tel" name="liven2" id="liven2" oninput="this.value = this.value.replace(/,/g, '.');if(parseFloat(this.value) > 10) this.value = 10;if(this.value != '') livenota(2);" placeholder="Nota N2">
                </div>            
              </div>
              <div class="block">
                <p id="msglive" style="text-align:center;"></p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Popup das Disciplinas -->
    <div class="popup" id="popup-dscp">
      <div class="view">
        <div class="page">
          <div class="navbar">
            <div class="navbar-inner">
              <div class="title" id="pp-tt">Popup das disciplinas</div>
              <div class="right">
                <a href="#" class="link popup-close" onclick="app.loginScreen.open('#my-login-screen');">Voltar</a>
              </div>
            </div>
          </div>
          <div class="page-content">
            <p style="text-align:center;">Clique nas notas das provas para alterá-las.</p>
            <div class="block">
              <div>
                <div class="block-title">Notas da N1</div>
                  <div class="list links-list">
                    <ul>
                      <li onclick="alterar(1);">
                        <a href="#">Primeira prova: <span id="n1p1">7.0</span></a>
                      </li>
                      <li onclick="alterar(2);">
                        <a href="#">Segunda prova: <span id="n1p2">7.0</span></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="block-title">Notas da N2</div>
                  <div class="list links-list">
                    <ul>
                      <li onclick="alterar(3);">
                        <a href="#">Primeira prova: <span id="n2p1">7.0</span></a>
                      </li>
                      <li onclick="alterar(4);">
                        <a href="#">Segunda prova: <span id="n2p2">7.0</span></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="block-title">Estado da disciplina</div>
                  <div class="list links-list">
                    <ul>
                      <li>
                        <a href="#" class="item-link item-content">Nota na N1: <span id="n1">7.0</span></a>
                      </li>
                      <li>
                        <a href="#">Nota na N2: <span id="n2">7.0</span></a>
                      </li>
                      <li>
                        <a href="#">Média parcial: <span id="mp">7.0</span></a>
                      </li>
                      <p id="extramsg" style="text-align:center;margin-top:2em;padding-bottom:2em;">7.0</p>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Screen -->
    <div class="login-screen" id="my-login-screen">
      <div class="view">
        <div class="page">
          <div class="page-content login-screen-content">
            <div class="login-screen-title">Disciplinas</div>
            <div id="lista_disc" class="list">
              <div class="list links-list">
                <ul id="dscp" class="list links-list" style="padding-left:16px;padding-right:16px;">
                </ul>
              </div>
            </div>
            
            <div id="cad_disc" class="list block-strong">
              <ul>
                <li class="item-content item-input">
                  <div class="item-inner">
                    <div class="item-title item-label">Adicionar disciplina</div>
                    <div class="item-input-wrap">
                      <input type="text" name="username" id="disc_nome" placeholder="Nome...">
                    </div>
                  </div>
                </li>
              </ul>
              <ul>
                <li>
                  <a href="#" class="item-link list-button" onclick="add_disc();document.getElementById('disc_nome').value='';">Adicionar disciplina</a>
                </li>
              </ul>
            </div>
            
            <div class="list">
              <ul>
                <li>
                  <a href="#" class="item-link list-button login-button">Fechar</a>
                </li>
              </ul>
              <div class="block-footer">Os seus dados ficam salvos <b>localmente</b>.<br>Não há como acessá-los de outro aparelho.</div>
            </div>

            <div class="list">
              <ul>
                <li>
                  <a href="#" onclick="reset();" style="color:red;" class="item-link list-button login-button">Limpar disciplinas</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Framework7 library -->
  <script src="https://12h01.github.io/ma/js/framework7.bundle.min.js"></script>

  <!-- Your custom app scripts -->
  <script>
  // Dom7
var $$ = Dom7;

// Instância principal do Framework7
var app  = new Framework7({
  root: '#app', // App root element
  id: 'com.meuacademico.imjpedro', // App bundle ID
  toast: {
    closeTimeout: 3000,
    closeButton: true,
  },
  dialog:{
    buttonOk: 'OK',
    buttonCancel: 'Cancelar'
  },
  name: 'MeuAcadêmico', // App name
  theme: 'md'
});

// Criar as atividades
var homeView = app.views.create('#view-home', {
  url: '/'
});

// Ação ao clicar no botão de Add disciplina
$$('#my-login-screen .login-button').on('click', function () {
  app.loginScreen.close('#my-login-screen');
  var toast = app.toast.create({text:'Dados salvos com sucesso.', closeTimeout:3000});
  toast.open();
});

function agradecer(){
  app.dialog.alert('<p>Obrigado Raiane, por ter me incentivado a continuar a desenvolver o algoritmo de calcular notas (e ter me incentivado a estudar Cálculo também kkkk)</p><p>Obrigado Daniela, Juan, Ary, Viviane e todos os outros que me incentivam sempre a estudar, me animam, enfim, fazem o que fazem comigo kkkkk Obrigado mesmo! ^-^</p><p>Obrigado também ao pessoal do Status Mobile (principalmente ao Ericks e ao Pedro Lemos), pelo incentivo ao estudo de programação. (e pela zueira também :v)</p>','Obrigado!');
}

function contato(){
  app.dialog.alert('Quer me falar alguma coisa? Encontrou algum bug no aplicativo? Me fale então!<p>E-mail: joaopedro@gmx.com<br>WhatsApp: (88) 98818-0440<br>Twitter / Github: @12h01</p>','Fale comigo!');
}

// Diálogo de alterar nota
function dialogo_alterar_nota(name,n,npa){
  name = name.replace(/,/g, '.');
  var disc_atual = document.getElementById('pp-tt').innerHTML;
  var gavetas = localStorage.getItem('notas');
  var gaveta = gavetas.split('lllvr');
  var colunas = gaveta[indice].split('suindr');
  colunas[n] = name;
  var novascolunas = '';
  var x = 0;
  while (x<colunas.length){
    novascolunas += colunas[x]+'suindr';
    x++;
  }
  novascolunas = novascolunas.slice(0, -6); // "12345.0"
  gaveta[indice] = novascolunas;
  novascolunas = '';
  x = 0;
  while (x<gaveta.length){
    novascolunas += gaveta[x] + 'lllvr';
    x++;
  }
  novascolunas = novascolunas.slice(0, -5); // "12345.0"
  localStorage.setItem('notas',novascolunas);
  switch(n){
    case 1:
      document.getElementById('n1p1').innerHTML = name;
      break;
    case 2:
      document.getElementById('n1p2').innerHTML = name;
      break;
    case 3:
      document.getElementById('n2p1').innerHTML = name;
      break;
    case 4:
      document.getElementById('n2p2').innerHTML = name;
      break;
  }
  var c1 = parseFloat(document.getElementById('n1p1').innerHTML);
  var c2 = parseFloat(document.getElementById('n1p2').innerHTML);
  var c3 = parseFloat(document.getElementById('n2p1').innerHTML);
  var c4 = parseFloat(document.getElementById('n2p2').innerHTML);
  var pn1 = (c1+c2)/2;
  var pn2 = (c3+c4)/2;
  var pmp = parseFloat(2*pn1+3*pn2)/5;
  if (pmp<3) document.getElementById('extramsg').innerHTML = 'Com uma média parcial de '+parseFloat(pmp).toFixed(1)+', você está reprovado.';
  else if (pmp<7) document.getElementById('extramsg').innerHTML = 'Com essa nota, você está na AVF. E vai precisar tirar um '+parseFloat(10 - pmp).toFixed(2)+' para ser aprovado';
  else document.getElementById('extramsg').innerHTML = 'Você foi <span style=\'color:green;\'>Aprovado</span> com média parcial de '+parseFloat(pmp).toFixed(1);
  document.getElementById('n1').innerHTML = parseFloat(pn1).toFixed(1);
  document.getElementById('n2').innerHTML = parseFloat(pn2).toFixed(1);
  document.getElementById('mp').innerHTML = parseFloat(pmp).toFixed(1);
  app.dialog.alert('Nota alterada! Sua nota na ' +npa + ' é '+ name+'.');
}

// Alterar nota
function alterar(n){
  switch(n){
    case 1:
      var npa = '1ª prova da N1';
      break;
    case 2:
      var npa = '2ª prova da N1';
      break;
    case 3:
      var npa = '1ª prova da N2';
      break;
    case 4:
      var npa = '2ª prova da N2';
      break;
  }
  app.dialog.prompt('Informe a sua nota na '+npa,'Alterar nota', function (name) {
    if ((parseFloat(name)<=10)&&(parseFloat(name)>=0)) dialogo_alterar_nota(name,n,npa);
    else {var toast = app.toast.create({text:'Erro: A nota precisa ser um número entre 0 e 10.', closeTimeout:3000});
    toast.open();}
  });
}

function livenota(caso){
  switch(caso){
    case 2:
      var live_n1 = document.getElementById("liven1").value;
      var live_n2 = document.getElementById("liven2").value;
      var live_mp = (2*parseFloat(live_n1) + 3*parseFloat(live_n2))/5;      
      if (live_mp<3) var stac = "<b style='color:red;'>reprovado</b>.";
      else if (live_mp<7){var porcausade = 7 - live_mp; var live_avf = 10 - live_mp; var stac = "na AVF... (foi pra AVF por causa de "+parseFloat(porcausade).toFixed(2)+" pontos)</p><p style='text-align:center;'>E precisa tirar um <b>"+parseFloat(live_avf).toFixed(2)+"</b> na AVF para passar.</p>"}
      else var stac = "<b  style='color:green;'>aprovado!</b> Parabéns!";
      if(!isNaN(live_mp)) document.getElementById("msglive").innerHTML = "Com um "+live_n1+" na N1, e um "+live_n2+" na N2, sua média parcial é <b>"+parseFloat(live_mp).toFixed(2)+"</b>. Ou seja, você está "+stac;
      break;
    default:
      var live_n1 = document.getElementById("liven1").value;
      var live_n2 = (35 - (2*parseFloat(live_n1)))/3;
      document.getElementById("liven2").value = parseFloat(live_n2).toFixed(2);
      document.getElementById("msglive").innerHTML = "Para fechar com média 7.0, você precisa de um "+parseFloat(live_n2).toFixed(2)+" na N2.";
      break;
  }
}

var indice = 0;

// Rotina Disciplinas
function rotinaDisciplinas(){
  document.getElementById("dscp").innerHTML = '';
  if(localStorage.getItem("disc") == null){
    var toast = app.toast.create({text:'Ainda não há nenhuma disciplina cadastrada.', closeTimeout:3000});
    toast.open();
  } else {
    var disc = localStorage.getItem("disc");
    var qtd = disc.split("lulalivre");
    
    var cont = 1;
    while (cont<qtd.length){
      var node = document.createElement("LI");
      var textnode = document.createTextNode(qtd[cont]);
      node.appendChild(textnode);
      var att = document.createAttribute("class");
      att.value="list popup-open";
      var att2 = document.createAttribute("data-popup");
      att2.value = "#popup-dscp";
      node.setAttributeNode(att);
      node.setAttributeNode(att2);
      document.getElementById("dscp").appendChild(node);
      cont++;
    };
  }   
}

var ul = document.getElementById('dscp');
ul.onclick = function(event) {
    app.loginScreen.close('#my-login-screen');
    var target = event.target;
    document.getElementById('pp-tt').innerHTML = event.target.innerHTML;
    var disc = localStorage.getItem("disc");
    var qtd = disc.split("lulalivre");
    var cont = 1;
    while (cont<qtd.length){
      if (qtd[cont] == event.target.innerHTML) indice = cont;
      cont++; 
    }
    
    var gavetas = localStorage.getItem('notas');
    var gaveta = gavetas.split('lllvr');
    var colunas = gaveta[indice].split('suindr');

    document.getElementById('n1p1').innerHTML = parseFloat(colunas[1]).toFixed(1);
    document.getElementById('n1p2').innerHTML = parseFloat(colunas[2]).toFixed(1);
    document.getElementById('n2p1').innerHTML = parseFloat(colunas[3]).toFixed(1);
    document.getElementById('n2p2').innerHTML = parseFloat(colunas[4]).toFixed(1);
    
    var pn1 = parseFloat(parseFloat(colunas[1]) + parseFloat(colunas[2]))/2;
    var pn2 = parseFloat(parseFloat(colunas[3]) + parseFloat(colunas[4]))/2;
    var pmp = parseFloat(2*pn1+3*pn2)/5;
    
    if (pmp<3) document.getElementById('extramsg').innerHTML = 'Com uma média parcial de '+parseFloat(pmp).toFixed(1)+', você está reprovado.';
    else if (pmp<7) document.getElementById('extramsg').innerHTML = 'Com essa nota, você está na AVF. E vai precisar tirar um '+parseFloat(10 - pmp).toFixed(2)+' na AVF para ser aprovado';
    else document.getElementById('extramsg').innerHTML = 'Você foi <span style=\'color:green;\'>Aprovado</span> com média parcial de '+parseFloat(pmp).toFixed(1);
    
    document.getElementById('n1').innerHTML = parseFloat(pn1).toFixed(1);
    document.getElementById('n2').innerHTML = parseFloat(pn2).toFixed(1);
    document.getElementById('mp').innerHTML = parseFloat(pmp).toFixed(1);    
};  

function reset(){
  localStorage.setItem("disc",'');  
  localStorage.setItem("notas",'');  
}

function add_disc(){
  var disc = document.getElementById("disc_nome").value;
  var salvas = localStorage.getItem("disc");
  if (localStorage.getItem("disc") == null) salvas = '';
  localStorage.setItem("disc",salvas+"lulalivre"+disc);
  var salvas2 = localStorage.getItem('notas');
  if (localStorage.getItem("notas") == null) salvas2 = '';
  localStorage.setItem("notas",salvas2+'lllvr'+disc+'suindr7.0suindr7.0suindr7.0suindr7.0');
  rotinaDisciplinas();
}

var tempo = 0;
while (tempo<10){
tempo++;
document.body.style.opacity = tempo/10;
}
</script>
</body>
</html>
